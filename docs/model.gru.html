---

title: Deep Generative Coding with GRUs 


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/01_model.gru.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_model.gru.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="ch">#! pip install tokenizers -U</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">list_datasets</span><span class="p">,</span> <span class="n">load_dataset</span><span class="p">,</span> <span class="n">list_metrics</span><span class="p">,</span> <span class="n">load_metric</span>
<span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">Dataset</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">tokenizers</span> <span class="kn">import</span> <span class="n">Tokenizer</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#import tensorflow.experimental.numpy as tnp</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path_data</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../dvc-icodegen&#39;</span><span class="p">)</span> <span class="c1">#dataset path</span>
<span class="k">def</span> <span class="nf">params</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;dummy_path&#39;</span> <span class="p">:</span> <span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;dummy/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;hyper&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;seq_length&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="c1">#This Value depends on the EDA</span>
            <span class="s1">&#39;batch_size&#39;</span><span class="p">:</span><span class="mi">64</span><span class="p">,</span>
            <span class="s1">&#39;buffer_size&#39;</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span>
            <span class="s1">&#39;rnn_units&#39;</span><span class="p">:</span><span class="mi">1024</span><span class="p">,</span>
            <span class="s1">&#39;epochs&#39;</span><span class="p">:</span><span class="mi">10</span>
        <span class="p">},</span>
        <span class="s1">&#39;checkpoint_dir&#39;</span><span class="p">:</span><span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;models/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dataset&#39;</span><span class="p">:</span><span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;searchnet/[codesearchnet-java-1597073966.81902].csv&#39;</span><span class="p">,</span>
        <span class="s1">&#39;eda&#39;</span><span class="p">:</span><span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;eda/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;tokenizer&#39;</span><span class="p">:</span><span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;bpe/tokenizer-java.json&#39;</span>
    <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;hyper&#39;</span><span class="p">][</span><span class="s1">&#39;seq_length&#39;</span><span class="p">])</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">])</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;eda&#39;</span><span class="p">])</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;tokenizer&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 11:39:29,633 : INFO : 100
2020-11-23 11:39:29,635 : INFO : ../dvc-icodegen/searchnet/[codesearchnet-java-1597073966.81902].csv
2020-11-23 11:39:29,637 : INFO : ../dvc-icodegen/eda
2020-11-23 11:39:29,638 : INFO : ../dvc-icodegen/bpe/tokenizer-java.json
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Datasets-Processing">Datasets Processing<a class="anchor-link" href="#Datasets-Processing"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="c1">#without bpe vectorization</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>repo</th>
      <th>path</th>
      <th>url</th>
      <th>code</th>
      <th>code_tokens</th>
      <th>docstring</th>
      <th>docstring_tokens</th>
      <th>language</th>
      <th>partition</th>
      <th>bpe32k</th>
      <th>code_len</th>
      <th>bpe32_len</th>
      <th>bpe_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>apache/spark</td>
      <td>sql/hive-thriftserver/src/main/java/org/apache...</td>
      <td>https://github.com/apache/spark/blob/25ee0474f...</td>
      <td>&lt;@&gt;Override&lt;n&gt;  &lt;public&gt; OperationHandle getSc...</td>
      <td>['@', 'Override', 'public', 'OperationHandle',...</td>
      <td>/* (non-Javadoc)\n@see org.apache.hive.service...</td>
      <td>['/', '*', '(', 'non', '-', 'Javadoc', ')']</td>
      <td>java</td>
      <td>train</td>
      <td>['▁', '@', 'Override', '▁public', '▁Operation'...</td>
      <td>31.0</td>
      <td>43.0</td>
      <td>[83, 186, 601, 88, 187, 34, 3916, 2854, 4673, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>BlueBrain/bluima</td>
      <td>modules/bluima_typesystem/src/main/java/de/jul...</td>
      <td>https://github.com/BlueBrain/bluima/blob/793ea...</td>
      <td>&lt;public&gt; &lt;void&gt; setTextObjects&lt;(&gt;FSArray v&lt;)&gt; ...</td>
      <td>['public', 'void', 'setTextObjects', '(', 'FSA...</td>
      <td>setter for textObjects - sets the text objects...</td>
      <td>['setter', 'for', 'textObjects', '-', 'sets', ...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁public', '▁void', '▁setText', 'Objects', '(...</td>
      <td>64.0</td>
      <td>92.0</td>
      <td>[34, 186, 47, 645, 989, 3718, 80, 727, 139, 54...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Vectorize-the-Tokens-with-BPE">Vectorize the Tokens with BPE<a class="anchor-link" href="#Vectorize-the-Tokens-with-BPE"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Without BPE Vectorization</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_tokenizer</span> <span class="o">=</span> <span class="n">Tokenizer</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;tokenizer&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">vocab</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">get_vocab</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="p">))</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> unique characters&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">vocab</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-18 11:25:09,448 : INFO : 10000 unique characters
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39; &lt;&amp;&amp;&gt; &lt;{&gt;&lt; Davidcito&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tokens</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39; &lt;&amp;&amp;&gt; &lt;{&gt;&lt; Davidcito&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ids</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tokens</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ids</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;🤗&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tokens</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;🤗&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ids</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 20:58:32,841 : INFO : [&#39;Ġ&#39;, &#39;&lt;&amp;&amp;&gt;&#39;, &#39;Ġ&#39;, &#39;&lt;{&gt;&#39;, &#39;Ġ&lt;&#39;, &#39;ĠD&#39;, &#39;av&#39;, &#39;id&#39;, &#39;c&#39;, &#39;it&#39;, &#39;o&#39;]
2020-11-23 20:58:32,844 : INFO : [186, 65, 186, 76, 190, 546, 1869, 287, 155, 258, 167]
2020-11-23 20:58:32,845 : INFO : [&#39;ĠĠ&#39;]
2020-11-23 20:58:32,846 : INFO : [187]
2020-11-23 20:58:32,848 : INFO : [&#39;Ġ&#39;]
2020-11-23 20:58:32,849 : INFO : [186]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">java_df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span><span class="o">.</span><span class="n">ids</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 11:42:13,228 : INFO : [83, 186, 601, 88, 187, 34, 3916, 2854, 4673, 1172, 349, 80, 5260, 2854, 1738, 2854, 100, 334, 242, 4739, 319, 100, 88, 300, 334, 2890, 319, 81, 186, 44, 726, 713, 5158, 186, 76, 88, 188, 35, 242, 474, 714, 102, 959, 1172, 349, 80, 1738, 2854, 100, 242, 4739, 319, 100, 2890, 319, 81, 82, 88, 187, 77]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode_batch</span><span class="p">(</span>
    <span class="p">[[</span><span class="s2">&quot;Hello, y&#39;all!&quot;</span><span class="p">,</span> <span class="s2">&quot;How are you 😁 ?&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Hello to you too!&quot;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m fine, thank you!&quot;</span><span class="p">]]</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;bpe_ids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">ids</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">java_df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">values</span><span class="p">]</span> <span class="c1">#Run this once</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="n">timestamp</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1605759118.768157</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../dvc-icodegen/searchnet/&#39;</span><span class="o">+</span><span class="s1">&#39;[</span><span class="si">{}</span><span class="s1">]-codesearchnet_java_bpe10k.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With BPE Vectorization</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_data</span><span class="o">/</span><span class="s1">&#39;searchnet/[1605759118.768157]-codesearchnet_java_bpe10k.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;~&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#with bpe vectorization</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;train&#39;</span><span class="p">]</span>
<span class="n">df_valid</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span><span class="p">]</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;test&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Train Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_train</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Valid Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_valid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Test Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_test</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 12:58:29,736 : INFO : Train Partition Size (384868, 13)
2020-11-23 12:58:29,737 : INFO : Valid Partition Size (14605, 13)
2020-11-23 12:58:29,738 : INFO : Test Partition Size (25011, 13)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tokenizer_len</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span> <span class="nb">eval</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span> <span class="p">)</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">df_train</span><span class="o">.</span><span class="n">bpe_ids</span><span class="o">.</span><span class="n">values</span><span class="p">]</span> <span class="c1">#Len of a method BECAREFUL when reading with BPE</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tokenizer_max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">tokenizer_len</span> <span class="p">)</span> <span class="c1">#Max Len of a method</span>
<span class="n">tokenizer_min_len</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">tokenizer_len</span> <span class="p">)</span> <span class="c1">#Min Len of a method</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;tokenizer_max_len &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span> <span class="n">tokenizer_max_len</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;tokenizer_min_len &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span> <span class="n">tokenizer_min_len</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 14:17:20,068 : INFO : tokenizer_max_len 85184
2020-11-23 14:17:20,069 : INFO : tokenizer_min_len 26
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;tokenizer_len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tokenizer_len</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/danaderp/.conda/envs/icodegen/lib/python3.7/site-packages/ipykernel_launcher.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  &#34;&#34;&#34;Entry point for launching an IPython kernel.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>The prediction task</em></p>
<p>Given a character, or a sequence of characters, what is the most probable next character? This is the task we're training the model to perform. The input to the model will be a sequence of characters, and we train the model to predict the output—the following character at each time step.</p>
<p>Since RNNs maintain an internal state that depends on the previously seen elements, given all the characters computed until this moment, what is the next character?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">df_train</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> 
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">df_train</span><span class="o">.</span><span class="n">bpe_ids</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> 
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span> <span class="nb">eval</span><span class="p">(</span> <span class="n">df_train</span><span class="o">.</span><span class="n">bpe_ids</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span> <span class="p">)</span> <span class="c1">#Enable special Tokens!</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span> <span class="p">[</span><span class="mi">0</span> <span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">0</span> <span class="p">]</span> <span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span> <span class="p">)</span> <span class="c1">#Enable special Tokens!</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-23 20:44:22,115 : INFO : &lt;@&gt;Override&lt;n&gt;  &lt;public&gt; OperationHandle getSchemas&lt;(&gt;SessionHandle sessionHandle, String catalogName,&lt;n&gt;      String schemaName&lt;)&gt; &lt;throws&gt; HiveSQLException &lt;{&gt;&lt;n&gt;    &lt;return&gt; cliService.getSchemas&lt;(&gt;sessionHandle, catalogName, schemaName&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;
2020-11-23 20:44:22,116 : INFO : [83, 186, 601, 88, 187, 34, 3916, 2854, 4673, 1172, 349, 80, 5260, 2854, 1738, 2854, 100, 334, 242, 4739, 319, 100, 88, 300, 334, 2890, 319, 81, 186, 44, 726, 713, 5158, 186, 76, 88, 188, 35, 242, 474, 714, 102, 959, 1172, 349, 80, 1738, 2854, 100, 242, 4739, 319, 100, 2890, 319, 81, 82, 88, 187, 77]
2020-11-23 20:44:22,118 : INFO : &lt;@&gt; Override&lt;n&gt;  &lt;public&gt; OperationHandle getSchemas&lt;(&gt; SessionHandle sessionHandle, String catalogName,&lt;n&gt;      String schemaName&lt;)&gt; &lt;throws&gt; HiveSQLException &lt;{&gt;&lt;n&gt;    &lt;return&gt; cliService.getSchemas&lt;(&gt; sessionHandle, catalogName, schemaName&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;
2020-11-23 20:44:22,119 : INFO : &lt;abstract&gt;&lt;assert&gt;&lt;abstract&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="EDA">EDA<a class="anchor-link" href="#EDA"> </a></h2><p>to determine the number of features in the tensor. Do not confuse with the number of batch.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>code_len</th>
      <th>bpe32_len</th>
      <th>tokenizer_len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>384868.00</td>
      <td>384868.00</td>
      <td>384868.00</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>113.72</td>
      <td>147.15</td>
      <td>234.01</td>
    </tr>
    <tr>
      <th>std</th>
      <td>194.01</td>
      <td>313.90</td>
      <td>493.64</td>
    </tr>
    <tr>
      <th>min</th>
      <td>20.00</td>
      <td>20.00</td>
      <td>26.00</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>42.00</td>
      <td>50.00</td>
      <td>78.00</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>67.00</td>
      <td>81.00</td>
      <td>128.00</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>122.00</td>
      <td>151.00</td>
      <td>243.00</td>
    </tr>
    <tr>
      <th>max</th>
      <td>27192.00</td>
      <td>52975.00</td>
      <td>85184.00</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>code_len         144.0
bpe32_len        180.0
tokenizer_len    290.0
Name: 0.8, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">MAX_SEQ</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">df_train</span><span class="p">[</span><span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;tokenizer_len&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">MAX_SEQ</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tokenizer_len&#39;</span><span class="p">,</span> <span class="s1">&#39;code_len&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f31b980bf90&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f31b9796ad0&gt;]],
      dtype=object)</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmMAAAE/CAYAAAAKbMRsAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADh0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uMy4yLjIsIGh0dHA6Ly9tYXRwbG90bGliLm9yZy+WH4yJAAAgAElEQVR4nO3df5zlVX3n+ddbMCX+QEW0AzSxMWLNAJsh0kPIOjGVJYltYoTMI8bux0bIyobokmgyySNCnI1tXHYxP3RjHMkQMYBrBAY1MvOARMRUnOzwY9CogFhrKwgtHfAHGtpEYref/eOeC7eLWz+66lZ9b1W9no/HfdT3nu+Pe86tW6c+95zzPSdVhSRJkrrxhK4zIEmStJEZjEmSJHXIYEySJKlDBmOSJEkdMhiTJEnqkMGYJElShwzGJEmSOmQwps4kuSfJjy/j/C1JKsmho8yXJC23fprjmj+SZGaU11zg9aaS7F6t19PSGYxJkjaElQiwDkZV/deqmuzq9TW+DMYkSVqj7BlYHwzGtCRJjk3ywSRfSfK1JO9M8oQk/z7Jl5I8mOSKJE8fOOdVbd/Xkrxx1vWekOT8JF9o+69OcsRB5unpSS5NsifJl5P8H0kOaft+McnfJvmDJA8luTvJS0fzbkgad0neC3wf8J+T7E3yW0lenuTOJN9IMp3kX85x7r9odcb29vxlST7VzvtvSX5g4Nh7kvxmks8k+WaSq5I8qe17tNswyStbPvqPR5JMt30Tra66N8kDSf4kyWGD10jyhiR/D/zZQbwHRyf5QKu3707yuoF9O1u9e0WSh9v7svVg32ctjcGYDloLcP4L8CVgC3AMcCXwi+3xY8DzgKcC72znnABcDLwKOBp4FrB54LKvA84EfrTtfwj4DweZtcuBfcDzgR8EfhL4Xwf2/xAwAxwJ/B5waZIc5GtIWoOq6lXAvcDPVNVTgb8A3g/8GvBs4Dp6gdr3DJ6X5IXAR4Bfraor2/P3AL9Mrx77j8C1SSYGTvt5YBtwHPAD9OrF2fm5qqqe2vJyNPDFlh+AtwIvAE6mV58dA/zOwOnfCxwBPBc4dzHlT/IE4D8Dn27XOx34tSQvGTjs5fTq8mcA19Lqb62CqvLh46AewA8DXwEOnZV+I/C/DTyfBL4DHEqvIrlyYN9TgH8Gfrw9vws4fWD/Uf1z58nHFqDa9TcBjwCHDezfAfx12/5FYNfAvie3c7+36/fThw8fq/MA7hmoc/534OqBfU8AvgxMDRz7ZmA38GMDx10MvGXWdWeAHx047xcG9v0e8CdtewrYPevcJ9D7cntxex7gW8D3Dxzzw8DdA9f4Z+BJiyjvo69H78vovbP2XwD8WdveCXx0YN8JwD91/TvbKA/7mrUUxwJfqqp9s9KPptda1vclHguUjgbu6++oqm8l+drAsc8FPpTkuwNp+9u5X15Enp4LPBHYM9DY9YTB1wT+fuD1/7Ed99RFXFvS+nNAfVVV301yH71Wo77XAH9TVX89kPZc4OwkvzqQ9j3ten1/P7D9j7P2zXYh8DR6vQPQa6V7MvCJgboswCED53ylqr49zzWHeS5wdJJvDKQdAvzXefL9pCSHDqnrNWIGY1qK+4DvG/JHej+9P/i+76PXbfgAsAd4dDxGkifTa+IfvOarq+r/XUaeHgGOtOKQNIca2L4f+B/6T9qQhWM58Mvfa4A3JHl7Vf16S7sPuLCqLlxuZtoYtB3Av66q77TkrwL/BJxYVXN9Ea050udzH73WteOXcK5WmGPGtBS30guuLkrylCRPSvIieuMdfj3JcUmeCvyfwFUtOLoGeFmSf9PGZPwuB37+/gS4MMlzAZI8O8kZi81QVe2hN67jD5Mc3m4I+P4kPzqKAktaFx6gN54V4Grgp5OcnuSJwG/Q+0L33waOf5je2K8XJ7mopf0p8JokP5SepyT56SRPO5iMJPlB4I+BM6vqK/30qvpue423J3lOO/aYWWO7luJW4B/awP/DkhyS5KQk/3qZ19UIGIzpoFXVfuBn6A0svZfemIpX0hvU+l7g48DdwLeBX23n3AmcB/w5vUDuoXZe3x/RGzD6kSQPAzfTG+NwMM6i113w2Xb9a+iNPZMkgP8L+Petq+5ngF+gFxB9tT3/mar658ETquobwE8AL03ylqq6DfgleoPbHwJ2MWSA/iKcATwT+NuBOyqvb/ve0K57c5J/AD5Kbwzukg3U2yfTq5+/CrwbePp852l1pA3UkyRJUgdsGZMkSeqQwZjGWpL/edbEiP3HnV3nTZK6luS356gjr1/4bI0LuyklSZI6ZMuYJElSh9bsPGNHHnlkbdmypetsLNq3vvUtnvKUp3SdjZFbr+UCy7ZaPvGJT3y1qp7ddT7GVZd13Th9ToYxf8s37nlcT/mbr65bs8HYli1buO2227rOxqJNT08zNTXVdTZGbr2WCyzbaknypYWP2ri6rOvG6XMyjPlbvnHP43rK33x1nd2UkiRJHTIYkyRJ6pDBmCRJUocMxiRJkjpkMCZJktQhgzFJkqQOGYxJkiR1yGBMkiSpQwZjkiRJHTIYkyRJ6pDBmCRJUofW7NqU42Dnzp2LSpOk9WZ2XWfdJy2dLWOSJEkdsmVsDrZ6Sdqo+nXd5OTko9vWf9LKsWVMkiSpQwZjkiRJHTIYkyRJ6pBjxhrHQ0iSpC7YMiZJktQhgzFJkqQO2U15EOzKlKTFc2JYaXFsGZMkSeqQwZgkSVKHFgzGkhyb5K+T3JXkziSvb+lHJLkhyefbz2cOnHNBkl1JZpK8ZCD9lCS3t33vSJKWPpHkqpZ+S5Itoy+qJEnS+FlMy9g+4Deq6l8CpwHnJTkBOB+4saqOB25sz2n7tgMnAtuAdyU5pF3rYuBc4Pj22NbSzwEeqqrnA28H3jqCskmSJI29BYOxqtpTVZ9s2w8DdwHHAGcAl7fDLgfObNtnAFdW1SNVdTewCzg1yVHA4VV1U1UVcMWsc/rXugY4vd9qJkmStJ4d1N2UrfvwB4FbgE1VtQd6AVuS57TDjgFuHjhtd0v7Ttuend4/5752rX1Jvgk8C/jqrNc/l17LGps2bWJ6evpgsj+vycnJkVxnrjzt3bt3pPkdF+u1XGDZNqIk7wFeBjxYVSfN2vebwO8Dz66qr7a0C+i17O8HXldVf9XSTwEuAw4DrgNeX1WVZILeF9FTgK8Br6yqe1ahaJLG2KKDsSRPBT4A/FpV/cM8DVfDdtQ86fOdc2BC1SXAJQBbt26tqampBXK9eKO65XrHjh1D06enpxllfsfFei0XWLYN6jLgnfQCpkclORb4CeDegbTBIRlHAx9N8oKq2s9jQzJupheMbQOuZ2BIRpLt9IZkvHKFyzTWnP5CWuTdlEmeSC8Qe19VfbAlP9C6Hmk/H2zpu4FjB07fDNzf0jcPST/gnCSHAk8Hvn6whZGk5aiqjzO87nk78Fsc+CXRIRmSRmIxd1MGuBS4q6reNrDrWuDstn028OGB9O3tDsnj6A3Uv7V1aT6c5LR2zbNmndO/1s8BH2uVmCR1KsnLgS9X1adn7Xp0eEXTH3pxDIsckgH0h2RI2sAW0035IuBVwO1JPtXSfhu4CLg6yTn0mu5fAVBVdya5GvgsvTsxz2vN9gCv5bFxFNe3B/SCvfcm2UXvW+n2ZZZLkpYtyZOBNwI/OWz3kLSRDMlYyfGxi9EfQzsxMfHo9uw8zB5nOyyPozpmLuM+9nHc8wfjn8eNkr8Fg7Gq+luGVyAAp89xzoXAhUPSbwNOGpL+bVowJ0lj5PuB44BPt97EzcAnk5zK8oZk7J5vSMZKjo9djP64rcnJSWZmZoDHj4edPbZr2HjZUR0zl3Ef+zju+YPxz+NGyZ8z8EvSHKrq9qp6TlVtqaot9IKpF1bV3+OQDEkjYjAmSU2S9wM3AZNJdrdhGENV1Z1Af0jGX/L4IRnvpjeo/wscOCTjWW1Ixr+jTZYtaWM7qHnGJGk9q6p5+8ha69jgc4dkSFo2W8YkSZI6ZDAmSZLUIYMxSZKkDhmMSZIkdchgTJIkqUPeTSlJWpALeEsrx5YxSZKkDhmMSZIkdchuyhGb3ZRv074kSZqPLWOSJEkdMhiTJEnqkMHYCtu5cyc7d+5kz549dllKkqTHMRiTJEnqkMGYJElShwzGJEmSOmQwJkmS1CGDMUmSpA4ZjEmSJHVowRn4k7wHeBnwYFWd1NKuAibbIc8AvlFVJyfZAtwFzLR9N1fVa9o5pwCXAYcB1wGvr6pKMgFcAZwCfA14ZVXdM4rCSZJWh1P3SEu3mJaxy4BtgwlV9cqqOrmqTgY+AHxwYPcX+vv6gVhzMXAucHx79K95DvBQVT0feDvw1iWVRJIkaQ1asGWsqj7eWrweJ0mAnwf+p/mukeQo4PCquqk9vwI4E7geOAPY2Q69BnhnklRVLa4IkqT1aliLm61wWm+WO2bsR4AHqurzA2nHJfm7JH+T5Eda2jHA7oFjdre0/r77AKpqH/BN4FnLzJckSdKasGDL2AJ2AO8feL4H+L6q+lobI/YXSU4EMuTcfsvXfPsOkORcel2dbNq0ienp6aXm+3EmJycXPmgZJiYmmJycHGmex8HevXvXXZn6LJskaTUsORhLcijwb+kNvAegqh4BHmnbn0jyBeAF9FrCNg+cvhm4v23vBo4FdrdrPh34+rDXrKpLgEsAtm7dWlNTU0vN/uOsdLP35OQkMzMz7NixY0VfZ7VNT08zyt/DOLFskqTVsJxuyh8HPldVj3Y/Jnl2kkPa9vPoDdT/YlXtAR5OclobZ3YW8OF22rXA2W3754CPOV5MkiRtFAsGY0neD9wETCbZneSctms7B3ZRArwY+EyST9MbjP+aquq3cr0WeDewC/gCvcH7AJcCz0qyC/h3wPnLKI8kLVmS9yR5MMkdA2m/n+RzST6T5ENJnjGw74Iku5LMJHnJQPopSW5v+97RvoSSZCLJVS39lrlujpK0sSzmbsqh/WpV9YtD0j5Ab6qLYcffBpw0JP3bwCsWyockrYLLgHfSm/uw7wbggqral+StwAXAG5KcQO9L6YnA0cBHk7ygqvbz2FQ+N9ObV3EbvS+gj07lk2Q7val8XrkqJZM0tpyBX5Kaqvo4s8asVtVH2p3e0Auu+uNfzwCurKpHqupueq3+pw5O5dOGXPSn8umfc3nbvgY4vd9qJmnjMhiTpMV7NY8NsXh0Wp6mP2WPU/lIOijLndpCkjaEJG8E9gHv6ycNOazmSZ/vnNmvtWLT+CxGf6qf/pQ8ozKsHLOvP/uYYa/fP2bcp2gZ9/zB+Odxo+TPYEySFpDkbHpr9J4+cLd3f1qevv6UPcueymclp/FZjP5UP/0peUZl2NQ+s6cVmn3MsGmH+seM+xQt454/GP88bpT82U0pSfNIsg14A/DyqvrHgV3XAtvbHZLH0ZvK51an8pF0sGwZk6SmTeUzBRyZZDfwJnp3T04AN7Sx9jdX1Wuq6s4kVwOfpdd9eV67kxJ6U/lcBhxGb4zZ4FQ+721T+Xyd3t2YG4ZrSkrDGYxJUjPHVD6XznP8hcCFQ9KdykfSohmMSZLWtGEtbrbCaS1xzJgkSVKHDMYkSZI6ZDAmSZLUIYMxSZKkDhmMSZIkdchgTJIkqUMGY5IkSR0yGJMkSeqQk75KksaGk7VqI7JlTJIkqUMbtmXMb1+SJGkc2DImSZLUIYMxSZKkDhmMSZIkdWjBYCzJe5I8mOSOgbSdSb6c5FPt8VMD+y5IsivJTJKXDKSfkuT2tu8dSdLSJ5Jc1dJvSbJltEWUJEkaX4tpGbsM2DYk/e1VdXJ7XAeQ5ARgO3BiO+ddSQ5px18MnAsc3x79a54DPFRVzwfeDrx1iWWRJElacxYMxqrq48DXF3m9M4Arq+qRqrob2AWcmuQo4PCquqmqCrgCOHPgnMvb9jXA6f1WM0mSpPVuOVNb/EqSs4DbgN+oqoeAY4CbB47Z3dK+07Znp9N+3gdQVfuSfBN4FvDV2S+Y5Fx6rWts2rSJ6enpJWd+cnJyyecuxcTEBJOTk8vK8zjau3fvuitTn2WTJK2GpQZjFwNvAar9/EPg1cCwFq2aJ50F9h2YWHUJcAnA1q1ba2pq6qAyPWi15xmbnJxkZmaGHTt2rOrrrrTp6WmW83sYZ5ZNkrQalnQ3ZVU9UFX7q+q7wJ8Cp7Zdu4FjBw7dDNzf0jcPST/gnCSHAk9n8d2ikiRJa9qSgrE2BqzvZ4H+nZbXAtvbHZLH0Ruof2tV7QEeTnJaGw92FvDhgXPObts/B3ysjSuTJEla9xbspkzyfmAKODLJbuBNwFSSk+l1J94D/DJAVd2Z5Grgs8A+4Lyq2t8u9Vp6d2YeBlzfHgCXAu9Nsotei9j2URRMkiRpLVgwGKuqYYOcLp3n+AuBC4ek3wacNCT928ArFsqHJEnSerRhFwqXJPWs9g1Nkg7kckiS1Myx4sgRSW5I8vn285kD+1xxRNKyGYxJ0mMu4/ErjpwP3FhVxwM3tueuOCJpZAzGJKmZY8WRwVVCLufA1UNccUTSshmMSdL8NrXpeWg/n9PSH109pOmvLHIMi1xxBOivOCJpA3MA/xiYPXjWwbTSmrBiK46Mcum3xZhrebj+Mm7jpv9+9Jf1GpbHcVjuay0sOzbuedwo+TMYk6T5PZDkqKra07ogH2zpy1lxZPd8K46Mcum3xZjrC2B/Gbdx019Wrr+s17D8j8PSc2th2bFxz+NGyZ/dlJI0v8FVQs7mwNVDXHFE0rLZMiZJzRwrjlwEXJ3kHOBe2iTVrjjSnX5L2OTkpMM6tC4YjElSM8eKIwCnz3G8K45IWjaDsVXmtzhJWn3eKKVx5pgxSZKkDhmMSZIkdchgTJIkqUMGY5IkSR0yGJMkSeqQwZgkSVKHDMYkSZI6ZDAmSZLUISd9HUPDJiN0gkJJktYnW8YkSZI6tGAwluQ9SR5McsdA2u8n+VySzyT5UJJntPQtSf4pyafa408Gzjklye1JdiV5R5K09IkkV7X0W5JsGX0xJUmSxtNiuikvA94JXDGQdgNwQVXtS/JW4ALgDW3fF6rq5CHXuRg4F7gZuA7YBlwPnAM8VFXPT7IdeCvwyiWURZIkwKEdWlsWbBmrqo8DX5+V9pGq2tee3gxsnu8aSY4CDq+qm6qq6AV2Z7bdZwCXt+1rgNP7rWaSJEnr3SjGjL2aXgtX33FJ/i7J3yT5kZZ2DLB74JjdLa2/7z6AFuB9E3jWCPIlSZI09pZ1N2WSNwL7gPe1pD3A91XV15KcAvxFkhOBYS1d1b/MPPtmv9659Lo62bRpE9PT00vO++Tk5JLPXYqJiYllveZyyrqS9u7dO7Z5Wy7LJklaDUsOxpKcDbwMOL11PVJVjwCPtO1PJPkC8AJ6LWGDXZmbgfvb9m7gWGB3kkOBpzOrW7Svqi4BLgHYunVrTU1NLTX7qz6eYHJykpmZmSWfv2PHjhHmZnSmp6dZzu9hnFk2SdJqWFIwlmQbvQH7P1pV/ziQ/mzg61W1P8nzgOOBL1bV15M8nOQ04BbgLOCP22nXAmcDNwE/B3ysH9zpMbODRwenStJoWc+qKwsGY0neD0wBRybZDbyJ3t2TE8ANbaz9zVX1GuDFwO8m2QfsB15TVf1WrtfSuzPzMHpjzPrjzC4F3ptkF70Wse0jKZkkSdIasGAwVlXD+scunePYDwAfmGPfbcBJQ9K/DbxioXxIkiStR87AL0mS1CGDMUmSpA4ZjEmSJHXIYEySJKlDBmOSJEkdMhiTJEnqkMGYJC1Ckl9PcmeSO5K8P8mTkhyR5IYkn28/nzlw/AVJdiWZSfKSgfRTktze9r0jbbJGSRuXwZgkLSDJMcDrgK1VdRJwCL0Jqs8Hbqyq44Eb23OSnND2nwhsA96V5JB2uYvprbF7fHtsW8WiSBpDBmOStDiHAoe1NXSfTG993TOAy9v+y4Ez2/YZwJVV9UhV3Q3sAk5NchRweFXd1JZ9u2LgHEkblMGYJC2gqr4M/AFwL7AH+GZVfQTYVFV72jF7gOe0U44B7hu4xO6Wdkzbnp0uaQNb0kLhkrSRtLFgZwDHAd8A/lOSX5jvlCFpNU/67Nc7l15XJps2bWJ6evpgs3xQJicnh6ZPTEzMuW8cLCd/w97T2dda7vu+d+/eFf/dLde453Gj5M9gTJIW9uPA3VX1FYAkHwT+R+CBJEdV1Z7WBflgO343cOzA+ZvpdWvubtuz0w9QVZcAlwBs3bq1pqamRluaWXbu3Dk0fXJykpmZmRV97eVYTv527Hj8ssuz34dhxxyM6elpVvp3t1zjnseNkj+DMUla2L3AaUmeDPwTcDpwG/At4Gzgovbzw+34a4E/T/I24Gh6A/Vvrar9SR5OchpwC3AW8MerWhIBcwegUhcMxiRpAVV1S5JrgE8C+4C/o9dy9VTg6iTn0AvYXtGOvzPJ1cBn2/HnVdX+drnXApcBhwHXt4ekDcxgTJIWoareBLxpVvIj9FrJhh1/IXDhkPTbgJNGnkGtitktarawaRS8m1KSJKlDBmOSJEkdMhiTJEnqkMGYJElShwzGJEmSOmQwJkmS1KEFg7Ek70nyYJI7BtKOSHJDks+3n88c2HdBkl1JZpK8ZCD9lCS3t33vSJKWPpHkqpZ+S5Itoy2iJEnS+FpMy9hlwLZZaecDN1bV8cCN7TlJTgC2Aye2c96V5JB2zsX01lo7vj361zwHeKiqng+8HXjrUgsjSZK01iw46WtVfXxIa9UZwFTbvhyYBt7Q0q+sqkeAu5PsAk5Ncg9weFXdBJDkCuBMejNPnwHsbNe6BnhnklTV4xbP1WOceFCSpPVhqTPwb6qqPQBtgdzntPRjgJsHjtvd0r7Ttmen98+5r11rX5JvAs8CvrrEvKkxYJM0m/WANH5GvRxShqTVPOnznfP4iyfn0uvqZNOmTUxPTy8hiz2Tk5NLPncpJiYmVvQ1h70Xs19vOe/XXPbu3bsi1x0Hlk2StBqWGow9kOSo1ip2FPBgS98NHDtw3Gbg/pa+eUj64Dm7kxwKPB34+rAXrapL6C3Oy9atW2tqamqJ2V/9b4eTk5PMzMys2PV37NjxuLTZZRx2zHJNT0+znN/DOLNs0sZmK6JWy1KntrgWOLttnw18eCB9e7tD8jh6A/VvbV2aDyc5rd1Fedasc/rX+jngY44XkyRJG8WCLWNJ3k9vsP6RSXYDbwIuAq5Ocg5wL/AKgKq6M8nVwGeBfcB5VbW/Xeq19O7MPIzewP3rW/qlwHvbYP+v07sbU5IkaUNYzN2Uc/VtnT7H8RcCFw5Jvw04aUj6t2nBnCRJ0kbjDPySJEkdMhiTJGmEdu7cyc6dO9mzZ483AWhRDMYkSZI6ZDAmSZLUIYMxSZKkDo16Bn51xHEJkiStTbaMSZIkdchgTJIkqUMGY5IkSR0yGJMkSeqQwZgkLUKSZyS5JsnnktyV5IeTHJHkhiSfbz+fOXD8BUl2JZlJ8pKB9FOS3N72vSNJuimRpHFhMCZJi/NHwF9W1b8A/hVwF3A+cGNVHQ/c2J6T5ARgO3AisA14V5JD2nUuBs4Fjm+PbatZCEnjx2BMkhaQ5HDgxcClAFX1z1X1DeAM4PJ22OXAmW37DODKqnqkqu4GdgGnJjkKOLyqbqqqAq4YOEfSBmUwJkkLex7wFeDPkvxdkncneQqwqar2ALSfz2nHHwPcN3D+7pZ2TNuenS5pA3PSV0la2KHAC4FfrapbkvwRrUtyDsPGgdU86QeenJxLryuTTZs2MT09fdAZnsvk5OSij52YmDio41fbOORv2O+mn6d+/kb5+xu1vXv3mr9lGFX+DMYkaWG7gd1VdUt7fg29YOyBJEdV1Z7WBfngwPHHDpy/Gbi/pW8ekn6AqroEuARg69atNTU1NbKCHMxqHZOTk8zMzIzstUdtHPK3Y8eOx6X13+N+/oYdMy6mp6cZ5edr1DZK/uymlKQFVNXfA/cl6TfDnA58FrgWOLulnQ18uG1fC2xPMpHkOHoD9W9tXZkPJzmt3UV51sA5kjYoW8YkaXF+FXhfku8Bvgj8L/S+0F6d5BzgXuAVAFV1Z5Kr6QVs+4Dzqmp/u85rgcuAw4Dr20NrlOsCaxQMxiRpEarqU8DWIbtOn+P4C4ELh6TfBpw02txJWsvsppQkSeqQwZgkSVKHDMYkSZI6tOQxY+2uoqsGkp4H/A7wDOCX6E2QCPDbVXVdO+cC4BxgP/C6qvqrln4Kjw1ovQ54fZudeiQcYClJksbVkoOxqpoBTgZoa659GfgQvTuM3l5VfzB4/Ky12o4GPprkBe0Oo/5abTfTC8a24R1GIzcsKDVQlaTuza6LrZs3llF1U54OfKGqvjTPMa7VJkmSNMuoprbYDrx/4PmvJDkLuA34jap6iN76azcPHNNfk+07uFbb2LD1TJKk1bXsYKxNgPhy4IKWdDHwFnrrrb0F+EPg1Sxzrbb2Wktar63rtctgPNZQG2b2ezgsj/O9z+O+bthyWDZJo2AXpBYyipaxlwKfrKoHAPo/AZL8KfBf2tNlrdXWrr2k9drG4YM/DmuoDbOYPM23rtq4rxu2HJZNkrQaRjFmbAcDXZRtDFjfzwJ3tG3XapMkSZplWS1jSZ4M/ATwywPJv5fkZHpdjff097lWmyRJ0uMtKxirqn8EnjUr7VXzHO9abZKkDW2pQ2cce7Z+OQO/JElShwzGJEmSOmQwJkmS1CGDMUmSpA4ZjEmSJHXIYEySJKlDBmOSJEkdMhiTJEnq0CjWppQkSR0bNgmsE8OuDQZjWpCzPkvS6rKe3VjsppQkSeqQwZgkSVKHDMYkSZI65JgxLZuDRrURJDkEuA34clW9LMkRwFXAFuAe4Oer6qF27AXAOcB+4HVV9Vct/RTgMuAw4Drg9VVVq1sSSePGljFJWpzXA3cNPD8fuLGqjgdubM9JcgKwHTgR2Aa8qwVyABcD5wLHt8e21cm6pHFmMCZJC0iyGfhp4N0DyWcAl7fty4EzB9KvrKpHqupuYBdwapKjgMOr6qbWGnbFwDmSNjC7KXXQBrsgJycnu8uItHr+b+C3gKcNpG2qqj0AVbUnyXNa+jHAzQPH7W5p32nbs9OlVTN7CIl1+HgwGJOkeSR5GfBgVRDthzgAAAv3SURBVH0iydRiThmSVvOkD3vNc+l1Z7Jp0yamp6cXl9lFOJh/vhMTE2P9z3qj52/252LYay10zMTExEg/X6O2d+/eDZE/gzFJmt+LgJcn+SngScDhSf4f4IEkR7VWsaOAB9vxu4FjB87fDNzf0jcPSX+cqroEuARg69atNTU1NbLCHMzNNZOTk8zMzIzstUdto+dvMdfesWPHAc+HtYyN8vM1atPT0xsif44Zk6R5VNUFVbW5qrbQG5j/sar6BeBa4Ox22NnAh9v2tcD2JBNJjqM3UP/W1qX5cJLTkgQ4a+AcSRuYLWOStDQXAVcnOQe4F3gFQFXdmeRq4LPAPuC8qtrfznktj01tcX17SNrglhWMJbkHeJjeXDr7qmqrc+9IWq+qahqYbttfA06f47gLgQuHpN8GnLRyOZSWz/WIV98ouil/rKpOrqqt7blz70iSJC3SSowZc+4dSZKkRVrumLECPpKkgP/Y7gBy7h1JksaAXYxrw3KDsRdV1f0t4LohyefmObazuXfGYR6acZ8PZ6nmKtc4zwuzWOM+v81yrOeySdJas6xgrKrubz8fTPIh4FTGcO6dcfhmMO7z4SzVXOWaPbfNWjTu89ssx3oumyStNUsOxpI8BXhCVT3ctn8S+F0em3vnIh4/986fJ3kbcDSPzb2zP8nDSU4DbqE3984fLzVfGg/ejSNJ65d1/Ggtp2VsE/Ch3tyFHAr8eVX9ZZL/jnPvSJIkLcqSg7Gq+iLwr4akO/eOJElrhK1a3XM5JEmSpA4ZjEmSJHXItSklSdLIOch/8QzGtCqG/REu5Q/VP2ZJ0npjN6UkSVKHbBmTJElzskdi5dkyJkmS1CGDMUmSpA7ZTanO2PQtSRubd1z2GIxJkqRl2ahB1KjYTSlJktQhW8YkSdJY2rNnz4boyrRlTJIkqUO2jEmSpDVrMSu8jDuDMUmStOLWWoC0muymlCRJ6pAtY1pTNsJATknaqGbX6ZOTk91kZJXZMiZJktQhW8a0pq2HgZsaf0mOBa4Avhf4LnBJVf1RkiOAq4AtwD3Az1fVQ+2cC4BzgP3A66rqr1r6KcBlwGHAdcDrq6pWszzSRjPuvSoGY5K0sH3Ab1TVJ5M8DfhEkhuAXwRurKqLkpwPnA+8IckJwHbgROBo4KNJXlBV+4GLgXOBm+kFY9uA61e9RJIO0GXAZjAmSQuoqj3Anrb9cJK7gGOAM4CpdtjlwDTwhpZ+ZVU9AtydZBdwapJ7gMOr6iaAJFcAZ2IwJi3auLVqjYLBmCQdhCRbgB8EbgE2tUCNqtqT5DntsGPotXz17W5p32nbs9Nnv8a59FrP2LRpE9PT0yPL/8EMiJ6YmBjrAdTmb/nGPY9Lzd/sv5nZ1xj2N7WYY/bs2XPA86c97Wkj+ftccjA2zxiKncAvAV9ph/52VV3XznEMhaQ1K8lTgQ8Av1ZV/5BkzkOHpNU86QcmVF0CXAKwdevWmpqaWlJ+hzmYVoXJyUlmZmZG9tqjZv6Wb9zzuNT87dix44Dnsz/3s/cv9ZipqSlG8fe5nJaxucZQALy9qv5g8GDHUEhay5I8kV4g9r6q+mBLfiDJUa1V7CjgwZa+Gzh24PTNwP0tffOQdEkjtNa6MpccjM0zhmIujqHQqhj3u2a09qTXBHYpcFdVvW1g17XA2cBF7eeHB9L/PMnb6H35PB64tar2J3k4yWn0ujnPAv54lYohqRm3/wsjGTM2awzFi4BfSXIWcBu91rOHWOYYivY6SxpHMQ794ePeL79Ua6FcS+3P37t370jH6oyT9Vy2FfIi4FXA7Uk+1dJ+m14QdnWSc4B7gVcAVNWdSa4GPkuvF+G81gsA8FoeG5ZxPSv8xXPc/ulIerxlB2NDxlBcDLyF3jiItwB/CLyaZY6hgKWPoxiHymjc++WXai2Ua1i//2JMT0+PZCzAOFrPZVsJVfW3DK+rAE6f45wLgQuHpN8GnDS63ElaCasZOyxrBv5hYyiq6oGq2l9V3wX+FDi1He4YCkmSpFmWczfl0DEU/cGs7enPAne0bcdQqBOOIZMkjbPldFPONYZiR5KT6XU13gP8MozXGAptbC6hJEkaJ8u5m3KuMRTXzXOOYygkSZIGLGvMmCRJkpbHYEySJKlDBmOSJEkdMhiTJEnq0Ehm4JfWOqe/kCR1xZYxSZKkDhmMSZIkdchuSmmInTt3Mjk5eUB3pV2XkqSVYMuYJElSh2wZkxbJQf6SpJVgy5gkSVKHDMYkSZI6ZDeltER2W0qSRsGWMUmSpA7ZMiaNyLCWMVvLJEkLsWVMkiSpQ7aMSSvIcWWSpIXYMiZJktQhgzFJkqQO2U0prSIH+UuSZjMYkzrmuDJJ2tjGJhhLsg34I+AQ4N1VdVHHWZI6YevZ+rdS9Z2fE2ltGosxY0kOAf4D8FLgBGBHkhO6zZUkjZ71naTZxqVl7FRgV1V9ESDJlcAZwGc7zZU0JhZq8bBFZE2xvpN0gHEJxo4B7ht4vhv4oY7yIq05BxuMTU5OsnPnToO4bljfSTrAuARjGZJWjzsoORc4tz3dm2RmRXM1WkcCX+06EytgvZYLNkDZ3vzmN3edD4Dndp2BVbZgfTdGdd24/w2Yv+Ub9zyOdf7e/OY3H0z+5qzrxiUY2w0cO/B8M3D/7IOq6hLgktXK1Cglua2qtnadj1Fbr+UCy6YVs2B9Ny513bh/Tszf8o17HjdK/sZiAD/w34HjkxyX5HuA7cC1HedJklaC9Z2kA4xFy1hV7UvyK8Bf0bvV+z1VdWfH2ZKkkbO+kzTbWARjAFV1HXBd1/lYQZ13OayQ9VousGxaIWuovhv3z4n5W75xz+OGyF+qHjdOXpIkSatkXMaMSZIkbUgGYysgyT1Jbk/yqSS3tbQjktyQ5PPt5zO7zudiJHlPkgeT3DGQNmdZklyQZFeSmSQv6SbXizNH2XYm+XL73X0qyU8N7FsTZUtybJK/TnJXkjuTvL6lr4vfm1bGONZb417/jHsdMu51wTz5G4v3MMmTktya5NMtf29u6aN//6rKx4gfwD3AkbPSfg84v22fD7y163wusiwvBl4I3LFQWegt7fJpYAI4DvgCcEjXZTjIsu0EfnPIsWumbMBRwAvb9tOA/6/lf1383nys2Odm7Oqtca9/xr0OGfe6YJ78jcV7SG9OwKe27ScCtwCnrcT7Z8vY6jkDuLxtXw6c2WFeFq2qPg58fVbyXGU5A7iyqh6pqruBXfSWfhlLc5RtLmumbFW1p6o+2bYfBu6iN+v7uvi9aVV1Wm+Ne/0z7nXIuNcF8+RvLqudv6qqve3pE9ujWIH3z2BsZRTwkSSfSG8mbYBNVbUHeh9A4Dmd5W755irLsGVe5vvDGle/kuQzrQui3/y8JsuWZAvwg/S+0a3335uWZ63UW2vhczx2dci41wWz8gdj8h4mOSTJp4AHgRuqakXeP4OxlfGiqnoh8FLgvCQv7jpDq2RRy1qNuYuB7wdOBvYAf9jS11zZkjwV+ADwa1X1D/MdOiRtrMumFbHW661x+RyPXR0y7nXBkPyNzXtYVfur6mR6K2WcmuSkeQ5fcv4MxlZAVd3ffj4IfIheM+UDSY4CaD8f7C6HyzZXWRa1rNU4q6oH2h/fd4E/5bEm5jVVtiRPpFe5va+qPtiS1+3vTcu3huqtsf4cj1sdMu51wbD8jdt72PL0DWAa2MYKvH8GYyOW5ClJntbfBn4SuIPecidnt8POBj7cTQ5HYq6yXAtsTzKR5DjgeODWDvK3ZP0/sOZn6f3uYA2VLUmAS4G7quptA7vW7e9Ny7PG6q2x/hyPUx0y7nXBXPkbl/cwybOTPKNtHwb8OPA5VuL9W6m7EDbqA3gevbspPg3cCbyxpT8LuBH4fPt5RNd5XWR53k+vmfg79KL+c+YrC/BGeneQzAAv7Tr/Syjbe4Hbgc+0P6yj1lrZgH9Dr2n8M8Cn2uOn1svvzceKfGbGst4a9/pn3OuQca8L5snfWLyHwA8Af9fycQfwOy195O+fM/BLkiR1yG5KSZKkDhmMSZIkdchgTJIkqUMGY5IkSR0yGJMkSeqQwZgkSVKHDMYkSZI6ZDAmSZLUof8fhrqOYQd2S2gAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Tensorflow-Datasets-[Default]">Tensorflow Datasets [Default]<a class="anchor-link" href="#Tensorflow-Datasets-[Default]"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_temp</span> <span class="o">=</span> <span class="n">df_train</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">384867</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_temp</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>repo</th>
      <th>path</th>
      <th>url</th>
      <th>code</th>
      <th>code_tokens</th>
      <th>docstring</th>
      <th>docstring_tokens</th>
      <th>language</th>
      <th>partition</th>
      <th>bpe32k</th>
      <th>code_len</th>
      <th>bpe32_len</th>
      <th>bpe_ids</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>apache/spark</td>
      <td>sql/hive-thriftserver/src/main/java/org/apache...</td>
      <td>https://github.com/apache/spark/blob/25ee0474f...</td>
      <td>&lt;@&gt;Override&lt;n&gt;  &lt;public&gt; OperationHandle getSc...</td>
      <td>['@', 'Override', 'public', 'OperationHandle',...</td>
      <td>/* (non-Javadoc)\n@see org.apache.hive.service...</td>
      <td>['/', '*', '(', 'non', '-', 'Javadoc', ')']</td>
      <td>java</td>
      <td>train</td>
      <td>['▁', '@', 'Override', '▁public', '▁Operation'...</td>
      <td>31.0</td>
      <td>43.0</td>
      <td>[83, 186, 601, 88, 187, 34, 3916, 2854, 4673, ...</td>
    </tr>
    <tr>
      <th>634927</th>
      <td>elki-project/elki</td>
      <td>elki-outlier/src/main/java/de/lmu/ifi/dbs/elki...</td>
      <td>https://github.com/elki-project/elki/blob/b546...</td>
      <td>&lt;protected&gt; &lt;static&gt; &lt;double&gt; sparsity&lt;(&gt;&lt;fina...</td>
      <td>['protected', 'static', 'double', 'sparsity', ...</td>
      <td>Method to calculate the sparsity coefficient o...</td>
      <td>['Method', 'to', 'calculate', 'the', 'sparsity...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁protected', '▁static', '▁double', '▁sparsit...</td>
      <td>65.0</td>
      <td>76.0</td>
      <td>[33, 186, 37, 186, 13, 273, 773, 171, 489, 80,...</td>
    </tr>
    <tr>
      <th>634927</th>
      <td>elki-project/elki</td>
      <td>elki-outlier/src/main/java/de/lmu/ifi/dbs/elki...</td>
      <td>https://github.com/elki-project/elki/blob/b546...</td>
      <td>&lt;protected&gt; &lt;static&gt; &lt;double&gt; sparsity&lt;(&gt;&lt;fina...</td>
      <td>['protected', 'static', 'double', 'sparsity', ...</td>
      <td>Method to calculate the sparsity coefficient o...</td>
      <td>['Method', 'to', 'calculate', 'the', 'sparsity...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁protected', '▁static', '▁double', '▁sparsit...</td>
      <td>65.0</td>
      <td>76.0</td>
      <td>[33, 186, 37, 186, 13, 273, 773, 171, 489, 80,...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Masking</em> is a way to tell sequence-processing layers that certain timesteps in an input are missing, and thus should be skipped when processing the data.</p>
<p><em>Padding</em> is a special form of masking where the masked steps are at the start or at the beginning of a sequence. Padding comes from the need to encode sequence data into contiguous batches: in order to make all sequences in a batch fit a given standard length, it is necessary to pad or truncate some sequences.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># It is recommended to use &quot;post&quot; padding when working with RNN layers</span>
<span class="c1"># (in order to be able to use the</span>
<span class="c1"># CuDNN implementation of the layers).</span>
<span class="c1">#For a padding reference check https://stackoverflow.com/questions/35751306/python-how-to-pad-numpy-array-with-zeros</span>
<span class="k">def</span> <span class="nf">method_resize</span><span class="p">(</span><span class="n">np_non_rec</span><span class="p">,</span> <span class="n">len_seq</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function recieves a vector of encoded methods and resized according to a length sequence</span>
<span class="sd">    the length sequence es the number of columns or features</span>
<span class="sd">    The function takes a non-rectangular tensor and transforms it into a rectangular one</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span> <span class="n">np_non_rec</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">/</span> <span class="n">len_seq</span> <span class="p">))</span> <span class="c1">#Minimum # of rows to complete/shape the sequence</span>
    <span class="n">pad_diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">rows</span> <span class="o">*</span> <span class="n">len_seq</span><span class="p">)</span> <span class="o">-</span> <span class="n">np_non_rec</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#1D required sequence minus the shape of the original tensor</span>
    <span class="n">np_rec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">np_non_rec</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_diff</span> <span class="p">),]</span> <span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">constant_values</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="c1">#np padding</span>
    <span class="n">np_rec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span> <span class="n">np_rec</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span> <span class="p">,</span> <span class="n">len_seq</span><span class="p">)</span> <span class="p">)</span> <span class="c1">#Reshaping The Tensor</span>
    <span class="k">return</span> <span class="n">np_rec</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">method2seq</span><span class="p">(</span><span class="n">raw_inputs</span><span class="p">,</span> <span class="n">seq_length</span> <span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This Function generated the conceptual decomposition of a method into </span>
<span class="sd">    a sequence or sequences given a max-len.</span>
<span class="sd">    # The method2seq method lets us easily convert these individual methods to sequences of the desired size.&#39;&#39;&#39;</span>
    <span class="n">np_raw_inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="nb">eval</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">raw_inputs</span><span class="p">]</span> <span class="c1">#Extracting/Evaluating the tensors stored in pandas</span>
    <span class="n">np_resized_inputs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">method_resize</span><span class="p">(</span> <span class="n">m</span><span class="p">,</span> <span class="n">seq_length</span> <span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">np_raw_inputs</span> <span class="p">]</span> <span class="c1">#Resizing methods </span>
    <span class="n">np_resized_inputs</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">np_resized_inputs</span> <span class="p">)</span> <span class="c1">#Merging Decomposed Sequences</span>
    <span class="k">return</span> <span class="n">tf</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">from_tensor_slices</span><span class="p">(</span> <span class="n">np_resized_inputs</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Testing-Tensorflow-Datasets">Testing Tensorflow Datasets<a class="anchor-link" href="#Testing-Tensorflow-Datasets"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf_sequences_train</span> <span class="o">=</span> <span class="n">method2seq</span><span class="p">(</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">bpe_ids</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">MAX_SEQ</span> <span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">tf_sequences_train</span><span class="o">.</span><span class="n">as_numpy_iterator</span><span class="p">())</span> <span class="c1">#TST</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[array([  83,  186,  601,   88,  187,   34, 3916, 2854, 4673, 1172,  349,
          80, 5260, 2854, 1738, 2854,  100,  334,  242, 4739,  319,  100,
          88,  300,  334, 2890,  319,   81,  186,   44,  726,  713, 5158,
         186,   76,   88,  188,   35,  242,  474,  714,  102,  959, 1172,
         349,   80, 1738, 2854,  100,  242, 4739,  319,  100, 2890,  319,
          81,   82,   88,  187,   77,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0]),
 array([  33,  186,   37,  186,   13,  273,  773,  171,  489,   80,   17,
         186,   26,  645,  786,  100,  186,   17,  186,   26, 2608,  786,
         100,  186,   17,  186,   26, 1224,  100,  186,   17,  186,   13,
        4147,  161,   81,  186,   76,   88,  188,   54,   54, 4802,  273,
         773,  171,  489,  242,   88,  188,   17,  186,   13,  411,  131,
         186,   50, 1740,  651,  102, 8622,  161,   80,  500,  102,  186,
          54, 4147,  161,  100, 1224,   81,   82,   88,  188,   35,  186,
          80,  645,  786,  186,   52,  186,   80, 2608,  786,  186,   53,
         411,  131,   81,   81,  186,   54, 7133, 2863,  102, 6695,   80,
        2608,  786,  186,   53,  411,  131,  186,   53,  186,   80,  500,
         186,   52,  411,  131,   81,   81,   82,   88,  187,   77,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0]),
 array([  33,  186,   37,  186,   13,  273,  773,  171,  489,   80,   17,
         186,   26,  645,  786,  100,  186,   17,  186,   26, 2608,  786,
         100,  186,   17,  186,   26, 1224,  100,  186,   17,  186,   13,
        4147,  161,   81,  186,   76,   88,  188,   54,   54, 4802,  273,
         773,  171,  489,  242,   88,  188,   17,  186,   13,  411,  131,
         186,   50, 1740,  651,  102, 8622,  161,   80,  500,  102,  186,
          54, 4147,  161,  100, 1224,   81,   82,   88,  188,   35,  186,
          80,  645,  786,  186,   52,  186,   80, 2608,  786,  186,   53,
         411,  131,   81,   81,  186,   54, 7133, 2863,  102, 6695,   80,
        2608,  786,  186,   53,  411,  131,  186,   53,  186,   80,  500,
         186,   52,  411,  131,   81,   81,   82,   88,  187,   77,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
           0,    0,    0])]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tf_sequences_train</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span> <span class="n">i</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;@&gt; Override&lt;n&gt;  &lt;public&gt; OperationHandle getSchemas&lt;(&gt; SessionHandle sessionHandle, String catalogName,&lt;n&gt;      String schemaName&lt;)&gt; &lt;throws&gt; HiveSQLException &lt;{&gt;&lt;n&gt;    &lt;return&gt; cliService.getSchemas&lt;(&gt; sessionHandle, catalogName, schemaName&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;
&lt;protected&gt; &lt;static&gt; &lt;double&gt; sparsity&lt;(&gt;&lt;final&gt; &lt;int&gt; setsize, &lt;final&gt; &lt;int&gt; dbsize, &lt;final&gt; &lt;int&gt; k, &lt;final&gt; &lt;double&gt; phi&lt;)&gt; &lt;{&gt;&lt;n&gt;    &lt;/&gt;&lt;/&gt; calculate sparsity c&lt;n&gt;    &lt;final&gt; &lt;double&gt; fK &lt;=&gt; MathUtil.powi&lt;(&gt; 1. &lt;/&gt; phi, k&lt;)&gt;&lt;;&gt;&lt;n&gt;    &lt;return&gt; &lt;(&gt; setsize &lt;-&gt; &lt;(&gt; dbsize &lt;*&gt; fK&lt;)&gt;&lt;)&gt; &lt;/&gt; FastMath.sqrt&lt;(&gt; dbsize &lt;*&gt; fK &lt;*&gt; &lt;(&gt; 1 &lt;-&gt; fK&lt;)&gt;&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;
&lt;protected&gt; &lt;static&gt; &lt;double&gt; sparsity&lt;(&gt;&lt;final&gt; &lt;int&gt; setsize, &lt;final&gt; &lt;int&gt; dbsize, &lt;final&gt; &lt;int&gt; k, &lt;final&gt; &lt;double&gt; phi&lt;)&gt; &lt;{&gt;&lt;n&gt;    &lt;/&gt;&lt;/&gt; calculate sparsity c&lt;n&gt;    &lt;final&gt; &lt;double&gt; fK &lt;=&gt; MathUtil.powi&lt;(&gt; 1. &lt;/&gt; phi, k&lt;)&gt;&lt;;&gt;&lt;n&gt;    &lt;return&gt; &lt;(&gt; setsize &lt;-&gt; &lt;(&gt; dbsize &lt;*&gt; fK&lt;)&gt;&lt;)&gt; &lt;/&gt; FastMath.sqrt&lt;(&gt; dbsize &lt;*&gt; fK &lt;*&gt; &lt;(&gt; 1 &lt;-&gt; fK&lt;)&gt;&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="HuggingFace-Datasets-[Not-recommended]">HuggingFace Datasets [Not recommended]<a class="anchor-link" href="#HuggingFace-Datasets-[Not-recommended]"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hf_train_java</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">df_temp</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hf_train_java</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Dataset(features: {&#39;repo&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;path&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;url&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;code&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;code_tokens&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;docstring&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;docstring_tokens&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;language&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;partition&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;bpe32k&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;code_len&#39;: Value(dtype=&#39;float64&#39;, id=None), &#39;bpe32_len&#39;: Value(dtype=&#39;float64&#39;, id=None), &#39;bpe_ids&#39;: Value(dtype=&#39;string&#39;, id=None), &#39;__index_level_0__&#39;: Value(dtype=&#39;int64&#39;, id=None)}, num_rows: 3)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hf_train_java</span><span class="p">[</span><span class="s1">&#39;bpe_ids&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;[83, 186, 601, 88, 187, 34, 3916, 2854, 4673, 1172, 349, 80, 5260, 2854, 1738, 2854, 100, 334, 242, 4739, 319, 100, 88, 300, 334, 2890, 319, 81, 186, 44, 726, 713, 5158, 186, 76, 88, 188, 35, 242, 474, 714, 102, 959, 1172, 349, 80, 1738, 2854, 100, 242, 4739, 319, 100, 2890, 319, 81, 82, 88, 187, 77]&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hf_train_java</span><span class="o">.</span><span class="n">set_format</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;tensorflow&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bpe_ids&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_features</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">hf_train_java</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">to_tensor</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">[</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tokenizer_max_len</span> <span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bpe_ids&#39;</span><span class="p">]}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-65-3cccdb16a190&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg">#A Dictionary of Features</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span>train_features <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">{</span>x<span class="ansi-blue-fg">:</span> hf_train_java<span class="ansi-blue-fg">[</span>x<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>to_tensor<span class="ansi-blue-fg">(</span>default_value<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span> shape<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">[</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tokenizer_max_len <span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> x <span class="ansi-green-fg">in</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;bpe_ids&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">}</span>

<span class="ansi-green-fg">&lt;ipython-input-65-3cccdb16a190&gt;</span> in <span class="ansi-cyan-fg">&lt;dictcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg">#A Dictionary of Features</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span>train_features <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">{</span>x<span class="ansi-blue-fg">:</span> hf_train_java<span class="ansi-blue-fg">[</span>x<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>to_tensor<span class="ansi-blue-fg">(</span>default_value<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span> shape<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">[</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tokenizer_max_len <span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> x <span class="ansi-green-fg">in</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;bpe_ids&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">}</span>

<span class="ansi-red-fg">AttributeError</span>: &#39;list&#39; object has no attribute &#39;to_tensor&#39;</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">train_features</span><span class="p">[</span><span class="s1">&#39;bpe_ids&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>tensorflow.python.framework.ops.EagerTensor</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tfdataset</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">from_tensor_slices</span><span class="p">((</span><span class="n">features</span><span class="p">,</span> <span class="n">hf_train_java</span><span class="p">[</span><span class="s2">&quot;bpe_ids&quot;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-training-examples-and-targets">Create training examples and targets<a class="anchor-link" href="#Create-training-examples-and-targets"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">seq_length</span> <span class="o">=</span> <span class="n">MAX_SEQ</span> 
<span class="c1">#seq_length = params[&#39;hyper&#39;][&#39;seq_length&#39;] </span>
<span class="c1">#examples_per_epoch = len(text)//(seq_length+1) </span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For each sequence, duplicate and shift it to form the input and target text by using the map method to apply a simple function to each batch:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">split_input_target</span><span class="p">(</span><span class="n">chunk</span><span class="p">):</span>
    <span class="n">input_text</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">target_text</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">input_text</span><span class="p">,</span> <span class="n">target_text</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">tf_sequences_train</span><span class="o">.</span><span class="n">map</span><span class="p">(</span> <span class="n">split_input_target</span> <span class="p">)</span> <span class="c1">#TST &lt;----- Deactivate when using the big dataset</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">input_example</span><span class="p">,</span> <span class="n">target_example</span> <span class="ow">in</span>  <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input data: &#39;</span><span class="p">,</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span> <span class="n">input_example</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span> <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Target data:&#39;</span><span class="p">,</span> <span class="n">new_tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span> <span class="n">target_example</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="p">,</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input data:  &lt;@&gt; Override&lt;n&gt;  &lt;public&gt; OperationHandle getSchemas&lt;(&gt; SessionHandle sessionHandle, String catalogName,&lt;n&gt;      String schemaName&lt;)&gt; &lt;throws&gt; HiveSQLException &lt;{&gt;&lt;n&gt;    &lt;return&gt; cliService.getSchemas&lt;(&gt; sessionHandle, catalogName, schemaName&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;
Target data:  Override&lt;n&gt;  &lt;public&gt; OperationHandle getSchemas&lt;(&gt; SessionHandle sessionHandle, String catalogName,&lt;n&gt;      String schemaName&lt;)&gt; &lt;throws&gt; HiveSQLException &lt;{&gt;&lt;n&gt;    &lt;return&gt; cliService.getSchemas&lt;(&gt; sessionHandle, catalogName, schemaName&lt;)&gt;&lt;;&gt;&lt;n&gt;  &lt;}&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;&lt;abstract&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each index of these vectors is processed as a one time step. For the input at time step 0, the model receives the index for "&lt;@&gt;" and tries to predict the index for "Override" as the next character. At the next timestep, it does the same thing but the RNN considers the previous step context in addition to the current input character.</p>

</div>
</div>
</div>
</div>
 

