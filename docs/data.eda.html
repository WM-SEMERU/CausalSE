---

title: Exploratory Data Analysis 


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/00_data.eda.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_data.eda.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> pip install sentencepiece
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span> 
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">or_</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">datetime</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sentencepiece</span> <span class="k">as</span> <span class="nn">spm</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Fixing parameters</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">params</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;dummy_path&#39;</span> <span class="p">:</span> <span class="s1">&#39;../dvc-icodegen/dummy/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;hyper&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;seq_length&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="s1">&#39;batch_size&#39;</span><span class="p">:</span><span class="mi">64</span><span class="p">,</span>
            <span class="s1">&#39;buffer_size&#39;</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span>
            <span class="s1">&#39;rnn_units&#39;</span><span class="p">:</span><span class="mi">1024</span><span class="p">,</span>
            <span class="s1">&#39;epochs&#39;</span><span class="p">:</span><span class="mi">10</span>
        <span class="p">},</span>
        <span class="s1">&#39;checkpoint_dir&#39;</span><span class="p">:</span><span class="s1">&#39;../dvc-icodegen/models/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dataset&#39;</span><span class="p">:</span><span class="s1">&#39;../dvc-icodegen/searchnet/[codesearchnet-java-1597073966.81902].csv&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bpe&#39;</span><span class="p">:</span><span class="s1">&#39;../dvc-icodegen/bpe/tokenizer-java&#39;</span><span class="p">,</span>
        <span class="s1">&#39;eda&#39;</span><span class="p">:</span><span class="s1">&#39;../dvc-icodegen/eda/&#39;</span>
    <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;hyper&#39;</span><span class="p">][</span><span class="s1">&#39;seq_length&#39;</span><span class="p">])</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">])</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;eda&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-17 16:06:10,751 : INFO : 100
2020-11-17 16:06:10,752 : INFO : ../dvc-icodegen/searchnet/[codesearchnet-java-1597073966.81902].csv
2020-11-17 16:06:10,753 : INFO : ../dvc-icodegen/eda/
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Loading-Datasets">Loading Datasets<a class="anchor-link" href="#Loading-Datasets"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>repo</th>
      <th>path</th>
      <th>url</th>
      <th>code</th>
      <th>code_tokens</th>
      <th>docstring</th>
      <th>docstring_tokens</th>
      <th>language</th>
      <th>partition</th>
      <th>bpe32k</th>
      <th>code_len</th>
      <th>bpe32_len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>apache/spark</td>
      <td>sql/hive-thriftserver/src/main/java/org/apache...</td>
      <td>https://github.com/apache/spark/blob/25ee0474f...</td>
      <td>&lt;@&gt;Override&lt;n&gt;  &lt;public&gt; OperationHandle getSc...</td>
      <td>['@', 'Override', 'public', 'OperationHandle',...</td>
      <td>/* (non-Javadoc)\n@see org.apache.hive.service...</td>
      <td>['/', '*', '(', 'non', '-', 'Javadoc', ')']</td>
      <td>java</td>
      <td>train</td>
      <td>['▁', '@', 'Override', '▁public', '▁Operation'...</td>
      <td>31.0</td>
      <td>43.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>BlueBrain/bluima</td>
      <td>modules/bluima_typesystem/src/main/java/de/jul...</td>
      <td>https://github.com/BlueBrain/bluima/blob/793ea...</td>
      <td>&lt;public&gt; &lt;void&gt; setTextObjects&lt;(&gt;FSArray v&lt;)&gt; ...</td>
      <td>['public', 'void', 'setTextObjects', '(', 'FSA...</td>
      <td>setter for textObjects - sets the text objects...</td>
      <td>['setter', 'for', 'textObjects', '-', 'sets', ...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁public', '▁void', '▁setText', 'Objects', '(...</td>
      <td>64.0</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>aws/aws-sdk-java</td>
      <td>aws-java-sdk-athena/src/main/java/com/amazonaw...</td>
      <td>https://github.com/aws/aws-sdk-java/blob/aa385...</td>
      <td>&lt;public&gt; &lt;void&gt; marshall&lt;(&gt;WorkGroup workGroup...</td>
      <td>['public', 'void', 'marshall', '(', 'WorkGroup...</td>
      <td>Marshall the given parameter object.</td>
      <td>['Marshall', 'the', 'given', 'parameter', 'obj...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁public', '▁void', '▁marshall', '(', 'Work',...</td>
      <td>117.0</td>
      <td>140.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>softindex/datakernel</td>
      <td>core-bytebuf/src/main/java/io/datakernel/byteb...</td>
      <td>https://github.com/softindex/datakernel/blob/0...</td>
      <td>&lt;public&gt; &lt;void&gt; put&lt;(&gt;&lt;@&gt;NotNull &lt;byte&gt;&lt;[&gt;&lt;]&gt; ...</td>
      <td>['public', 'void', 'put', '(', '@', 'NotNull',...</td>
      <td>Puts given byte array to the {@link ByteBuf} f...</td>
      <td>['Puts', 'given', 'byte', 'array', 'to', 'the'...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁public', '▁void', '▁put', '(', '@', 'NotNul...</td>
      <td>64.0</td>
      <td>72.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>lunisolar/magma</td>
      <td>magma-func-builder/src/main/java/eu/lunisolar/...</td>
      <td>https://github.com/lunisolar/magma/blob/83809c...</td>
      <td>&lt;@&gt;Non&lt;null&gt;&lt;n&gt;\t&lt;public&gt; &lt;static&gt; &lt;lesser&gt;T&lt;g...</td>
      <td>['@', 'Nonnull', 'public', 'static', '&lt;', 'T',...</td>
      <td>One of ways of creating builder. This is possi...</td>
      <td>['One', 'of', 'ways', 'of', 'creating', 'build...</td>
      <td>java</td>
      <td>train</td>
      <td>['▁', '@', 'Nonnull', '▁public', '▁static', '▁...</td>
      <td>46.0</td>
      <td>52.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;train&#39;</span><span class="p">]</span>
<span class="n">df_valid</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span><span class="p">]</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;test&#39;</span><span class="p">]</span>
<span class="n">df_bpe</span> <span class="o">=</span> <span class="n">java_df</span><span class="p">[</span><span class="n">java_df</span><span class="p">[</span><span class="s1">&#39;partition&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bpe&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">list_all_partitions</span> <span class="o">=</span> <span class="p">[</span><span class="n">df_train</span><span class="p">,</span> <span class="n">df_valid</span><span class="p">,</span> <span class="n">df_test</span><span class="p">,</span> <span class="n">df_bpe</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Train Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_train</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Valid Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_valid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Test Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_test</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;BPE Partition Size &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df_bpe</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-17 12:10:39,058 : INFO : Train Partition Size (384868, 12)
2020-11-17 12:10:39,059 : INFO : Valid Partition Size (14605, 12)
2020-11-17 12:10:39,060 : INFO : Test Partition Size (25011, 12)
2020-11-17 12:10:39,062 : INFO : BPE Partition Size (42719, 12)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">code_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">code_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0    &lt;@&gt;Override&lt;n&gt;  &lt;public&gt; OperationHandle getSc...
1    &lt;public&gt; &lt;void&gt; setTextObjects&lt;(&gt;FSArray v&lt;)&gt; ...
2    &lt;public&gt; &lt;void&gt; marshall&lt;(&gt;WorkGroup workGroup...
3    &lt;public&gt; &lt;void&gt; put&lt;(&gt;&lt;@&gt;NotNull &lt;byte&gt;&lt;[&gt;&lt;]&gt; ...
4    &lt;@&gt;Non&lt;null&gt;&lt;n&gt;\t&lt;public&gt; &lt;static&gt; &lt;lesser&gt;T&lt;g...
Name: code, dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Transformations">Data Transformations<a class="anchor-link" href="#Data-Transformations"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">count_subwords</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span> <span class="nb">eval</span><span class="p">(</span><span class="n">mtd</span><span class="p">)</span> <span class="p">)</span> <span class="k">for</span> <span class="n">mtd</span> <span class="ow">in</span> <span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;code_tokens&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;count_tokens&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_subwords</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Descriptive-Statistics">Descriptive Statistics<a class="anchor-link" href="#Descriptive-Statistics"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All Java Set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">java_df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>code_len</th>
      <th>bpe32_len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>467203.000000</td>
      <td>467203.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>113.079653</td>
      <td>146.274557</td>
    </tr>
    <tr>
      <th>std</th>
      <td>189.121245</td>
      <td>303.804009</td>
    </tr>
    <tr>
      <th>min</th>
      <td>20.000000</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>42.000000</td>
      <td>50.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>67.000000</td>
      <td>81.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>122.000000</td>
      <td>150.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>27192.000000</td>
      <td>52975.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All Java Partition</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>code_len</th>
      <th>bpe32_len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>384868.000000</td>
      <td>384868.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>113.720826</td>
      <td>147.151002</td>
    </tr>
    <tr>
      <th>std</th>
      <td>194.007951</td>
      <td>313.904001</td>
    </tr>
    <tr>
      <th>min</th>
      <td>20.000000</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>42.000000</td>
      <td>50.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>67.000000</td>
      <td>81.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>122.000000</td>
      <td>151.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>27192.000000</td>
      <td>52975.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">([</span> <span class="n">p</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">list_all_partitions</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-17 12:31:54,629 : INFO : [            code_len      bpe32_len
count  384868.000000  384868.000000
mean      113.720826     147.151002
std       194.007951     313.904001
min        20.000000      20.000000
25%        42.000000      50.000000
50%        67.000000      81.000000
75%       122.000000     151.000000
max     27192.000000   52975.000000,            code_len     bpe32_len
count  14605.000000  14605.000000
mean      94.331736    120.097843
std      115.802231    171.079255
min       21.000000     21.000000
25%       39.000000     46.000000
50%       59.000000     71.000000
75%      104.000000    127.000000
max     3099.000000   5747.000000,            code_len     bpe32_len
count  25011.000000  25011.000000
mean     114.274599    148.204710
std      166.432695    245.938732
min       21.000000     22.000000
25%       43.000000     52.000000
50%       69.000000     84.000000
75%      125.000000    155.000000
max     5685.000000  10015.000000,            code_len     bpe32_len
count  42719.000000  42719.000000
mean     113.013156    146.197781
std      176.473185    275.722996
min       20.000000     21.000000
25%       42.000000     50.000000
50%       67.000000     82.000000
75%      123.000000    151.000000
max     8404.000000  15552.000000]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">([</span> <span class="n">stats</span><span class="o">.</span><span class="n">median_absolute_deviation</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;code_len&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">list_all_partitions</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2020-11-17 12:29:30,408 : INFO : [45.9606, 37.065, 47.4432, 44.477999999999994]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Train Partition</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_tokens</span> <span class="o">=</span> <span class="n">df_train</span><span class="o">.</span><span class="n">code_tokens</span><span class="o">.</span><span class="n">values</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_vocab_tokens</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">eval</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>  <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">train_tokens</span> <span class="p">]</span> <span class="c1">#Evaluating given tokens</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_counter_tokens</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Counter</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">train_vocab_tokens</span> <span class="p">]</span> <span class="c1">#Counting the words</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_counter</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">train_counter_tokens</span> <span class="p">)</span> <span class="c1">## [Warning! Time Consuming]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_counter</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-fc0adc03a92e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>train_counter

<span class="ansi-red-fg">NameError</span>: name &#39;train_counter&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;eda&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;[&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span> <span class="o">+</span><span class="s1">&#39;]-codesearchnet_token_counts.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outputfile</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span> <span class="n">train_counter</span><span class="p">,</span> <span class="n">outputfile</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

